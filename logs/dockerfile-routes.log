Script started on 2021-01-22 12:57:51-05:00
]0;root@workstation:/home/student/DO180-apps/logs[root@workstation logs]# lab openshift-routes start

Setting up workstation for the Guided Exercise: Exposing a Service as a Route

 Verifying the OpenShift cluster is running:
 Â· Log in on OpenShift.........................................  [1;36mSUCCESS[0;39m
 Â· Check master node na45-mh9qn-master-0 is ready..............  [1;36mSUCCESS[0;39m
 Â· Check master node na45-mh9qn-master-1 is ready..............  [1;36mSUCCESS[0;39m
 Â· Check master node na45-mh9qn-master-2 is ready..............  [1;36mSUCCESS[0;39m
 Â· Check the internal registry is up and running...............  [1;36mSUCCESS[0;39m
 Â· Ensuring the 'martinrapa-route' project does not exist......  [1;36mSUCCESS[0;39m
]0;root@workstation:/home/student/DO180-apps/logs[root@workstation logs]# source /usr/local/etc/ocp4..[Kconfig 
]0;root@workstation:/home/student/DO180-apps/logs[root@workstation logs]# oc logsource /usr/local/etc/ocp4.config [K^C
]0;root@workstation:/home/student/DO180-apps/logs[root@workstation logs]# historry[K[Ky | grep oc login
grep: login: No such file or directory
]0;root@workstation:/home/student/DO180-apps/logs[root@workstation logs]# history | grep oc login"[1@"
  279  [01;31m[Koc login[m[K -u ${RHT_OCP4_DEV_USER} -p ${RHT_OCP4_DEV_PASSWORD] ${RHT_OCP4_MASTER_API}; ; 
  286  [01;31m[Koc login[m[K -u martinrapa -p 77edd950144948b5a09e https://api.na45.prod.nextcle.com:6443/
  291  history | grep [01;31m[Koc login[m[K
  292  history | grep "[01;31m[Koc login[m[K"
]0;root@workstation:/home/student/DO180-apps/logs[root@workstation logs]# oc login -u martinrapa -p 77edd950144948b5a09e https://api.na45.prod.nextcle.com:6443/
Login successful.

You don't have any projects. You can try to create a new project, by running

    oc new-project <projectname>

]0;root@workstation:/home/student/DO180-apps/logs[root@workstation logs]# oc new-project martinrapa-route
Now using project "martinrapa-route" on server "https://api.na45.prod.nextcle.com:6443".

You can add applications to this project with the 'new-app' command. For example, try:

    oc new-app ruby~https://github.com/sclorg/ruby-ex.git

to build a new example application in Ruby. Or use kubectl to deploy a simple Kubernetes application:

    kubectl create deployment hello-node --image=gcr.io/hello-minikube-zero-install/hello-node

]0;root@workstation:/home/student/DO180-apps/logs[root@workstation logs]# e[Koc new-app --as-deployment-config pho[Kp:7.3~https://github.com/MartinRapa/DO180-apps --CONTEXT[K[K[K[K[K[K[Kcontext-dir  php-helloworld --name php-helloworld
--> Found image 988e5d4 (5 months old) in image stream "openshift/php" under tag "7.3" for "php:7.3"

    Apache 2.4 with PHP 7.3 
    ----------------------- 
    PHP 7.3 available as container is a base platform for building and running various PHP 7.3 applications and frameworks. PHP is an HTML-embedded scripting language. PHP attempts to make it easy for developers to write dynamically generated web pages. PHP also offers built-in database integration for several commercial and non-commercial database management systems, so writing a database-enabled webpage with PHP is fairly simple. The most common use of PHP coding is probably as a replacement for CGI scripts.

    Tags: builder, php, php73, rh-php73

    * A source build using source code from https://github.com/MartinRapa/DO180-apps will be created
      * The resulting image will be pushed to image stream tag "php-helloworld:latest"
      * Use 'oc start-build' to trigger a new build
    * This image will be deployed in deployment config "php-helloworld"
    * Ports 8080/tcp, 8443/tcp will be load balanced by service "php-helloworld"
      * Other containers can access this service through the hostname "php-helloworld"

--> Creating resources ...
    imagestream.image.openshift.io "php-helloworld" created
    buildconfig.build.openshift.io "php-helloworld" created
    deploymentconfig.apps.openshift.io "php-helloworld" created
    service "php-helloworld" created
--> Success
    Build scheduled, use 'oc logs -f bc/php-helloworld' to track its progress.
    Application is not exposed. You can expose services to the outside world by executing one or more of the commands below:
     'oc expose svc/php-helloworld' 
    Run 'oc status' to view your app.
]0;root@workstation:/home/student/DO180-apps/logs[root@workstation logs]# oc get pods -w
NAME                     READY   STATUS    RESTARTS   AGE
php-helloworld-1-build   1/1     Running   0          13s
php-helloworld-1-build   0/1     Completed   0          34s
php-helloworld-1-deploy   0/1     Pending     0          0s
php-helloworld-1-deploy   0/1     Pending     0          0s
php-helloworld-1-deploy   0/1     ContainerCreating   0          1s
php-helloworld-1-deploy   0/1     ContainerCreating   0          3s
php-helloworld-1-b2dnz    0/1     Pending             0          0s
php-helloworld-1-b2dnz    0/1     Pending             0          0s
php-helloworld-1-b2dnz    0/1     ContainerCreating   0          0s
php-helloworld-1-deploy   1/1     Running             0          4s
php-helloworld-1-b2dnz    0/1     ContainerCreating   0          3s
php-helloworld-1-b2dnz    1/1     Running             0          4s
php-helloworld-1-deploy   0/1     Completed           0          8s
 
]0;root@workstation:/home/student/DO180-apps/logs[root@workstation logs]#  
]0;root@workstation:/home/student/DO180-apps/logs[root@workstation logs]# OC LOGS[K[K[K[K[K[K[Koc logs -f bc/php-hellowolr[K[Krld
Cloning "https://github.com/MartinRapa/DO180-apps" ...
	Commit:	4e315284376bc7fee940a6e8b6ae797c3f82bfcb (lab openshift resources)
	Author:	root <root@workstation.lab.example.com>
	Date:	Fri Jan 22 12:56:54 2021 -0500
Caching blobs under "/var/cache/blobs".
Getting image source signatures
Copying blob sha256:e7021e0589e97471d99c4265b7c8e64da328e48f116b5f260353b2e0a2adb373
Copying blob sha256:14e4b218199e7985dbeca760da0fa9b969ca5fdaae5095a273cd924afa6898e9
Copying blob sha256:9e7a6dc796f0a75c560158a9f9e30fb8b5a90cb53edce9ffbdf5778406e4de39
Copying blob sha256:fc5b206e9329a1674dd9e8efbee45c9be28d0d0dcbabba3c6bb67a2f22cfcf2a
Copying blob sha256:f659c5c779ac4373302bfe3dc7d713c59cf9ec9f179a71e9b26336a51043fad2
Copying config sha256:988e5d4c035d1585f006d0c57a0cfe4bc9f8aae412585f4a6b8fed87da45105f
Writing manifest to image destination
Storing signatures
Generating dockerfile with builder image image-registry.openshift-image-registry.svc:5000/openshift/php@sha256:962d936b00f4953d977be9b85268a289bf2f9d49df4d51b408a7c7835a551103
STEP 1: FROM image-registry.openshift-image-registry.svc:5000/openshift/php@sha256:962d936b00f4953d977be9b85268a289bf2f9d49df4d51b408a7c7835a551103
STEP 2: LABEL "io.openshift.build.commit.id"="4e315284376bc7fee940a6e8b6ae797c3f82bfcb"       "io.openshift.build.commit.ref"="master"       "io.openshift.build.commit.message"="lab openshift resources"       "io.openshift.build.source-location"="https://github.com/MartinRapa/DO180-apps"       "io.openshift.build.source-context-dir"="php-helloworld"       "io.openshift.build.image"="image-registry.openshift-image-registry.svc:5000/openshift/php@sha256:962d936b00f4953d977be9b85268a289bf2f9d49df4d51b408a7c7835a551103"       "io.openshift.build.commit.author"="root <root@workstation.lab.example.com>"       "io.openshift.build.commit.date"="Fri Jan 22 12:56:54 2021 -0500"
STEP 3: ENV OPENSHIFT_BUILD_NAME="php-helloworld-1"     OPENSHIFT_BUILD_NAMESPACE="martinrapa-route"     OPENSHIFT_BUILD_SOURCE="https://github.com/MartinRapa/DO180-apps"     OPENSHIFT_BUILD_COMMIT="4e315284376bc7fee940a6e8b6ae797c3f82bfcb"
STEP 4: USER root
STEP 5: COPY upload/src /tmp/src
STEP 6: RUN chown -R 1001:0 /tmp/src
STEP 7: USER 1001
STEP 8: RUN /usr/libexec/s2i/assemble
---> Installing application source...
=> sourcing 20-copy-config.sh ...
---> 19:50:24     Processing additional arbitrary httpd configuration provided by s2i ...
=> sourcing 00-documentroot.conf ...
=> sourcing 50-mpm-tuning.conf ...
=> sourcing 40-ssl-certs.sh ...
STEP 9: CMD /usr/libexec/s2i/run
STEP 10: COMMIT temp.builder.openshift.io/martinrapa-route/php-helloworld-1:2e568f6e
time="2021-01-22T19:50:24Z" level=info msg="Image operating system mismatch: image uses OS \"\"+architecture \"\", expecting one of \"linux+amd64\""
Getting image source signatures
Copying blob sha256:abc8c32bad762f509f729872b552e8366b9c71a863dc5e9e648dda04a7896e50
Copying blob sha256:b9e30d7689db4040323cb65632888c37d96cbd60d0f05c4dd37e78b9b8a0566a
Copying blob sha256:8b0dba9179a6a0d5de65c6b001c8c9c83eaa169ce526b22a33845ede8f74568c
Copying blob sha256:bda7ec697f579121100fed608753105e2150894241b011af8b12fea98296f8f7
Copying blob sha256:5daa741fd16f3d131c8667e9e7bcbcb0ce95243275070d34686eb6df2c6200fd
Copying blob sha256:f00d00230ae5071ffa374ce2bfc07a8c48de27e405fca0e3dced02d256a05a79
Copying config sha256:52decc64faf3f25942908d29c5de693f906a1abfd83cba79ed0c8b1770301bf6
Writing manifest to image destination
Storing signatures
--> 52decc64faf
52decc64faf3f25942908d29c5de693f906a1abfd83cba79ed0c8b1770301bf6

Pushing image image-registry.openshift-image-registry.svc:5000/martinrapa-route/php-helloworld:latest ...
Getting image source signatures
Copying blob sha256:f00d00230ae5071ffa374ce2bfc07a8c48de27e405fca0e3dced02d256a05a79
Copying blob sha256:fc5b206e9329a1674dd9e8efbee45c9be28d0d0dcbabba3c6bb67a2f22cfcf2a
Copying blob sha256:14e4b218199e7985dbeca760da0fa9b969ca5fdaae5095a273cd924afa6898e9
Copying blob sha256:f659c5c779ac4373302bfe3dc7d713c59cf9ec9f179a71e9b26336a51043fad2
Copying blob sha256:e7021e0589e97471d99c4265b7c8e64da328e48f116b5f260353b2e0a2adb373
Copying blob sha256:9e7a6dc796f0a75c560158a9f9e30fb8b5a90cb53edce9ffbdf5778406e4de39
Copying config sha256:52decc64faf3f25942908d29c5de693f906a1abfd83cba79ed0c8b1770301bf6
Writing manifest to image destination
Storing signatures
Successfully pushed image-registry.openshift-image-registry.svc:5000/martinrapa-route/php-helloworld@sha256:09834dc456393ffdb657fd7b9bb6ce81bf471216bcc6c5fa662fddc749fb9c25
Push successful
]0;root@workstation:/home/student/DO180-apps/logs[root@workstation logs]# oc describe s[K[K[K[K[K[K[K[K[K[Kist[K[K[K[K list svc
Error: unknown command "list" for "oc"

Did you mean this?
	get
	wait

Run 'oc --help' for usage.
]0;root@workstation:/home/student/DO180-apps/logs[root@workstation logs]# os[Kc get svc
NAME             TYPE        CLUSTER-IP       EXTERNAL-IP   PORT(S)             AGE
php-helloworld   ClusterIP   172.30.157.161   <none>        8080/TCP,8443/TCP   14m
]0;root@workstation:/home/student/DO180-apps/logs[root@workstation logs]# os describe svc/php-hellowolrd
bash: os: command not found...
]0;root@workstation:/home/student/DO180-apps/logs[root@workstation logs]# os describe svc/php-hellowolrd[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[1P[1@c[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[1Plrd[1Prd[Cld[Cd[1Pdd[C[Kord[Cld
Name:              php-helloworld
Namespace:         martinrapa-route
Labels:            app=php-helloworld
                   app.kubernetes.io/component=php-helloworld
                   app.kubernetes.io/instance=php-helloworld
Annotations:       openshift.io/generated-by: OpenShiftNewApp
Selector:          deploymentconfig=php-helloworld
Type:              ClusterIP
IP:                172.30.157.161
Port:              8080-tcp  8080/TCP
TargetPort:        8080/TCP
Endpoints:         10.129.6.60:8080
Port:              8443-tcp  8443/TCP
TargetPort:        8443/TCP
Endpoints:         10.129.6.60:8443
Session Affinity:  None
Events:            <none>
]0;root@workstation:/home/student/DO180-apps/logs[root@workstation logs]# oc expodescribe svc/php-helloworld[1P svc/php-helloworld[1P svc/php-helloworld[1P svc/php-helloworld[1P svc/php-helloworld[1P svc/php-helloworld[1P svc/php-helloworld[1P svc/php-helloworld[1P svc/php-helloworlde svc/php-helloworldx svc/php-helloworldp svc/php-helloworldo svc/php-helloworlds svc/php-helloworlde svc/php-helloworld
route.route.openshift.io/php-helloworld exposed
]0;root@workstation:/home/student/DO180-apps/logs[root@workstation logs]# oc describe route
Name:			php-helloworld
Namespace:		martinrapa-route
Created:		10 seconds ago
Labels:			app=php-helloworld
			app.kubernetes.io/component=php-helloworld
			app.kubernetes.io/instance=php-helloworld
Annotations:		openshift.io/host.generated=true
Requested Host:		php-helloworld-martinrapa-route.apps.na45.prod.nextcle.com
			  exposed on router default (host apps.na45.prod.nextcle.com) 10 seconds ago
Path:			<none>
TLS Termination:	<none>
Insecure Policy:	<none>
Endpoint Port:		8080-tcp

Service:	php-helloworld
Weight:		100 (100%)
Endpoints:	10.129.6.60:8443, 10.129.6.60:8080
]0;root@workstation:/home/student/DO180-apps/logs[root@workstation logs]# curl php-helloworld-martinrapa-route.apps.na45.prod.nextcle.com
Hello, World! php version is 7.3.11
]0;root@workstation:/home/student/DO180-apps/logs[root@workstation logs]# oc delete route /php-ht[Kelloworld
error: there is no need to specify a resource type as a separate argument when passing arguments in resource/name form (e.g. 'oc get resource/<resource_name>' instead of 'oc get resource resource/<resource_name>'
]0;root@workstation:/home/student/DO180-apps/logs[root@workstation logs]# oc delete route /php-helloworld[1Pphp-helloworld[1Pphp-helloworld/php-helloworld
route.route.openshift.io "php-helloworld" deleted
]0;root@workstation:/home/student/DO180-apps/logs[root@workstation logs]# oc expose svc/php-helloworld --name=mari[Ktinrapa-xyz
route.route.openshift.io/martinrapa-xyz exposed
]0;root@workstation:/home/student/DO180-apps/logs[root@workstation logs]# oc expose svc/php-helloworld --name=martinrapa-xyz[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[20Pdelete route/php-helloworld /php-helloworld[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[Ccurl php-helloworld-martinrapa-route.apps.na45.prod.nextcle.com[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[Coc describe route[K
Name:			martinrapa-xyz
Namespace:		martinrapa-route
Created:		12 seconds ago
Labels:			app=php-helloworld
			app.kubernetes.io/component=php-helloworld
			app.kubernetes.io/instance=php-helloworld
Annotations:		openshift.io/host.generated=true
Requested Host:		martinrapa-xyz-martinrapa-route.apps.na45.prod.nextcle.com
			  exposed on router default (host apps.na45.prod.nextcle.com) 11 seconds ago
Path:			<none>
TLS Termination:	<none>
Insecure Policy:	<none>
Endpoint Port:		8080-tcp

Service:	php-helloworld
Weight:		100 (100%)
Endpoints:	10.129.6.60:8443, 10.129.6.60:8080
]0;root@workstation:/home/student/DO180-apps/logs[root@workstation logs]# lab openshift-routes finish

Completing the Guided Exercise: Exposing a Service as a Route

 Â· Removing OpenShift project 'martinrapa-route'...............  [1;36mSUCCESS[0;39m
]0;root@workstation:/home/student/DO180-apps/logs[root@workstation logs]# exit
exit

Script done on 2021-01-22 15:08:16-05:00
